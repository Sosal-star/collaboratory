<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/d2891741f1.js" crossorigin="anonymous"></script>
    <title>Manage Bus | Station Management System</title>
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="manage.css">

</head>
<body>

     <!-- ===============Navigation ================ --> 
     <div class="container1">
        <div class="navigation">
            <ul>
                <li>
                    <a href="#">
                        <span class="icon">
                       
                        </span>
                        <span class="title">Bus-managementsystem</span>
                    </a>
                </li>
                <li>
                    <a href="./admindashboard.html">
                        <span class="icon">
                            <ion-icon name="grid-outline"></ion-icon>
                        </span>
                        <span class="title">Dashboard</span>
                      
                    </a>
                </li>

                <li>
                    <a href="./managebus.html">
                        <span class="icon">
                            <ion-icon name="bus-outline"></ion-icon>
                        </span>
                        <span class="title">Manage Buses</span>
                      
                    </a>
                </li>

                <li>
                    <a href="./managedriver.html">
                        <span class="icon">
                            <ion-icon name="people-outline"></ion-icon>
                        </span>
                        <span class="title">Manage Drivers</span>
                    </a>
                </li>

                <li>
                    <a href="./managestationmanager.html">
                        <span class="icon">
                            <ion-icon name="people-outline"></ion-icon>
                        </span>
                        <span class="title">Manage Station Manager</span>
                    </a>
                </li>

                <li>
                    <a href="./manageroutes.html">
                        <span class="icon">
                            <i class="fas fa-route"></i>
                        </span>
                        <span class="title">Manage Routes</span>
                    </a>
                </li>

                <li>
                    <a href="./manageschedule.html">
                        <span class="icon">
                            <ion-icon name="settings-outline"></ion-icon>
                        </span>
                        <span class="title">Manage Schedule</span>
                    </a>
                </li>

                <!-- <li>
                    <a href="#">
                        <span class="icon">
                            <ion-icon name="lock-closed-outline"></ion-icon>
                        </span>
                        <span class="title">Report</span>
                    </a>
                </li> -->

                <!--li>
                    <a href = "#">
                        <span class="icon">
                            <ion-icon name="book-outline"></ion-icon>
                        </span>
                        <span class="title">Contents</span>
                    </a>
                </li-->
                <li>
                    <a href="login.html" id="signout-link">
                        <span class="icon">
                            <ion-icon name="log-out-outline"></ion-icon>
                        </span>
                        <span class="title">Sign Out</span>
                    </a>
                </li>
            </ul>
        </div>

<!-- main -->

<div class="container2 main">
    <div class="topbar">
        <div class="toggle">
            <ion-icon name="menu-outline"></ion-icon>
        </div>
    </div>
    <div class="card">
        <div class="card-header">
            <h2>Manage Routes</h2>
            <button class="add-btn" onclick="showAddRouteForm()">Add Routes</button>
        </div>
        <div class="add-route-form" style="display:none;">
            <form id="addRouteForm" action="/addroute" method="POST">
                
                <label for="origin">origin:</label>
                <input type="text" id="origin" name="origin" required>
                <label for="destination">Destination:</label>
                <input type="text" id="destination" name="destination" required>
                <label for="distance">Distance:</label>
                <input type="text" id="distance" name="distance" required>
                <label for="duration">Duration:</label>
                <input type="text" id="duration" name="duration" required>
                <label for="status">Status:</label>
                <select id="status" name="status">
                    <option value="active">Active</option>
                    <option value="inactive">Inactive</option>
                </select>
                <label for="bus_id">Assign to Bus:</label>
                <input type="text" id="bus_id" name="bus_id">
                <button type="submit" class="Addbutton">Add Routes</button>
            </form>
        </div>
                <table class="station-table">
                    <thead>
                        <tr>
                            <th>Route ID</th>
                            <th>Origin</th>
                            <th>Destination</th>
                            <th>Distance</th>
                            <th>Duration</th>
                            <th>Status</th>
                            <th>Bus ID</th>
                        </tr>
                    </thead>
                    <tbody id="routeList">
                        
                        
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <script>
        function showAddRouteForm() {
            var form = document.querySelector('.add-route-form');
            form.style.display = form.style.display === 'none' ? 'block' : 'none';
        }
        document.addEventListener('DOMContentLoaded', function() {
        fetchRoutes(); // Call on page load to fetch and display routes
});

function fetchRoutes() {
    fetch('/getroutes')
    .then(response => response.json())
    .then(routes => {
        const routeList = document.getElementById('routeList'); // Make sure you have a tbody element with this ID in your table
        routeList.innerHTML = ''; // Clear previous entries

            routes.forEach(route => {
                routeList.innerHTML += `
                    <tr>
                        <td>${route.route_id}</td>
                        <td>${route.origin}</td>
                        <td>${route.destination}</td>
                        <td>${route.distance}</td>
                        <td>${route.duration}</td>
                        <td>${route.status}</td>
                        <td>${route.bus_id}</td>
                    </tr>
                `;
            });
        })
        .catch(error => {
            console.error('Error fetching routes:', error);
        });
}
    </script>
     <!-- =========== Scripts =========  -->
     <!--script src="./main.js"></script-->

     <!-- signout popup information -->
     <!--script src="./signout.js"></script-->
      <!-- ====== ionicons ======= -->
      <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
      <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
</body>
</html>