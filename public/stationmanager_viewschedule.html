<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/d2891741f1.js" crossorigin="anonymous"></script>
    <title>View Schedule | Station Management System</title>
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="manage.css">
</head>
<body>
    <!-- ===============Navigation ================ --> 
    <div class="container1">
        <div class="navigation">
            <ul>
                <li class="logowrapper">
                    <!--img src="logo.jpg" alt="Bus logo" class="logo"-->
                    <span class="title">Sajilo safari</span>
                </li>
                <li><a href="./stationmanagerdashboard.html"><span class="icon"><ion-icon name="grid-outline"></ion-icon></span><span class="title">Dashboard</span></a></li>
                <li><a href="./stationmanager_viewdriver.html"><span class="icon"><ion-icon name="people-outline"></ion-icon></span><span class="title">View Drivers</span></a></li>
                <li><a href="./stationmanager_viewroutes.html"><span class="icon"><i class="fas fa-route"></i></span><span class="title">View Routes</span></a></li>
                <li><a href="./stationmanager_viewschedule.html"><span class="icon"><ion-icon name="settings-outline"></ion-icon></span><span class="title">View Schedule</span></a></li>
                <li><a href="login.html" id="signout-link"><span class="icon"><ion-icon name="log-out-outline"></ion-icon></span><span class="title">Sign Out</span></a></li>
            </ul>
        </div>
        <!-- main -->
        <div class="container2 main">
            <div class="topbar">
                <div class="toggle"><ion-icon name="menu-outline"></ion-icon></div>
            </div>
            <div class="card">
                <div class="card-header"><h2>View Schedule</h2></div>
                <!-- details -->
                <div class="card-body">
                    <table class="station-table">
                        <thead>
                            <tr>
                                <th>Schedule Id</th>
                                <th>Route Id</th>
                                <th>Bus Id</th>
                                <th>Departure time</th>
                                <th>Arrival time</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="scheduleliststationmanager">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <!-- =========== Scripts =========  -->
        <script>
            function fetchSchedules() {
                fetch('/getstationmanagerschedules')
                    .then(response => response.json())
                    .then(schedules => {
                        const scheduleList = document.getElementById('scheduleliststationmanager');
                        scheduleList.innerHTML = ''; // Clear previous entries

                        schedules.forEach(schedule => {
                            scheduleList.innerHTML += `
                                <tr>
                                    <td>${schedule.schedule_id}</td>
                                    <td>${schedule.route_id}</td>
                                    <td>${schedule.bus_id}</td>
                                    <td>${schedule.departure_time}</td>
                                    <td>${schedule.arrival_time}</td>
                                    <td>${schedule.status}</td>
                                </tr>
                            `;
                        });
                    })
                    .catch(error => {
                        console.error('Error fetching schedules:', error);
                    });
            }

            document.addEventListener('DOMContentLoaded', fetchSchedules);
        </script>
        <!-- ====== ionicons ======= -->
        <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
        <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
    </div>
</body>
</html>
