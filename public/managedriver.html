<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/d2891741f1.js" crossorigin="anonymous"></script>
    <title>Manage Bus | Station Management System</title>
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="manage.css">

</head>
<body>

     <!-- ===============Navigation ================ --> 
     <div class="container1">
        <div class="navigation">
            <ul>
                <li>
                    <a href="#">
                        <span class="icon">
                       
                        </span>
                        <span class="title">Bus-managementsystem</span>
                    </a>
                </li>
                <li>
                    <a href="./admindashboard.html">
                        <span class="icon">
                            <ion-icon name="grid-outline"></ion-icon>
                        </span>
                        <span class="title">Dashboard</span>
                      
                    </a>
                </li>

                <li>
                    <a href="./managebus.html">
                        <span class="icon">
                            <ion-icon name="bus-outline"></ion-icon>
                        </span>
                        <span class="title">Manage Buses</span>
                      
                    </a>
                </li>

                <li>
                    <a href="./managedriver.html">
                        <span class="icon">
                            <ion-icon name="people-outline"></ion-icon>
                        </span>
                        <span class="title">Manage Drivers</span>
                    </a>
                </li>

                <li>
                    <a href="./managestationmanager.html">
                        <span class="icon">
                            <ion-icon name="people-outline"></ion-icon>
                        </span>
                        <span class="title">Manage Station Manager</span>
                    </a>
                </li>

                <li>
                    <a href="./manageroutes.html">
                        <span class="icon">
                            <i class="fas fa-route"></i>
                        </span>
                        <span class="title">Manage Routes</span>
                    </a>
                </li>

                <li>
                    <a href="./manageschedule.html">
                        <span class="icon">
                            <ion-icon name="settings-outline"></ion-icon>
                        </span>
                        <span class="title">Manage Schedule</span>
                    </a>
                </li>

                <!-- <li>
                    <a href="#">
                        <span class="icon">
                            <ion-icon name="lock-closed-outline"></ion-icon>
                        </span>
                        <span class="title">Report</span>
                    </a>
                </li> -->

                <li>
                    <a href = "#">
                        <span class="icon">
                            <ion-icon name="book-outline"></ion-icon>
                        </span>
                        <span class="title">Contents</span>
                    </a>
                </li>
                <li>
                    <a href="#" id="signout-link">
                        <span class="icon">
                            <ion-icon name="log-out-outline"></ion-icon>
                        </span>
                        <span class="title">Sign Out</span>
                    </a>
                </li>
            </ul>
        </div>

<!-- main -->

<div class="container2 main">
    <div class="topbar">
        <div class="toggle">
            <ion-icon name="menu-outline"></ion-icon>
        </div>
    </div>
    <div class="card">
        <div class="card-header">
            <h2>Manage Driver</h2>
            <button class="add-btn" onclick="showAddDriverForm()">Add Driver</button>
        </div>
        <div class="add-driver-form" style="display:none;">
            <form id="addDriverForm" action="/adddriver" method="POST">
                <label for="driver_name">Name:</label>
                <input type="text" id="driver_name" name="driver_name" required>
                
                <label for="driver_email">Email:</label>
                <input type="email" id="driver_email" name="driver_email" required>
                
                <label for="driver_password">Password:</label>
                <input type="password" id="driver_password" name="driver_password" required>
                
                <label for="driver_contact">Contact Number:</label>
                <input type="text" id="driver_contact" name="driver_contact" required>
                
                <label for="bus_id">Assign to Bus:</label>
                <input type="text" id="bus_id" name="bus_id">
                    <!-- Bus options will be populated here -->
                    <select id="driver_status" name="driver_status">
                        <option value="active">Active</option>
                        <option value="inactive">Inactive</option>
                    </select>
                
                
                <button type="submit">Add Driver</button>
            </form>
        </div>
                <table class="station-table">
                    <thead>
                        <tr>
                            <th>Driver ID</th>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Password</th>
                            <th>Contact Number</th>
                            <th>Bus Assign</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="driverList">
                     <!-- Driver data will be dynamically inserted here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <script>
        function showAddDriverForm() {
            var form = document.querySelector('.add-driver-form');
            form.style.display = form.style.display === 'none' ? 'block' : 'none';
        }
        document.addEventListener('DOMContentLoaded', function() {
    fetchDrivers(); // Call on page load
});

function fetchDrivers() {
    fetch('/getdrivers')
        .then(response => response.json())
        .then(drivers => {
            const driverList = document.getElementById('driverList'); // Ensure you have a tbody element with this ID
            driverList.innerHTML = ''; // Clear existing driver list

            drivers.forEach(driver => {
                driverList.innerHTML += `
                    <tr>
                        <td>${driver.driver_id}</td>
                        <td>${driver.name}</td>
                        <td>${driver.email}</td>
                        <td>${driver.password}</td>
                        <td>${driver.contact_number}</td>
                        <td>${driver.bus_id}</td>
                        <td>${driver.status}</td>
                    </tr>
                `;
            });
        })
        .catch(error => {
            console.error('Error fetching drivers:', error);
        });
}
        
    </script>
     <!-- =========== Scripts =========  -->
     <!--script src="./main.js"></script-->

     <!-- signout popup information -->
     <!--script src="./signout.js"></script-->
      <!-- ====== ionicons ======= -->
      <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
      <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
</body>
</html>