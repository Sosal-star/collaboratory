<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/d2891741f1.js" crossorigin="anonymous"></script>
    <title>Manage Bus | Station Management System</title>
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="manage.css">

</head>
<body>

     <!-- ===============Navigation ================ --> 
     <div class="container1">
        <div class="navigation">
            <ul>
                <li>
                    <a href="#">
                        <span class="icon">
                       
                        </span>
                        <span class="title">Bus-managementsystem</span>
                    </a>
                </li>
                <li>
                    <a href="./index.html">
                        <span class="icon">
                            <ion-icon name="grid-outline"></ion-icon>
                        </span>
                        <span class="title">Dashboard</span>
                      
                    </a>
                </li>

                <li>
                    <a href="./managebus.html">
                        <span class="icon">
                            <ion-icon name="bus-outline"></ion-icon>
                        </span>
                        <span class="title">Manage Buses</span>
                      
                    </a>
                </li>

                <li>
                    <a href="./managedriver.html">
                        <span class="icon">
                            <ion-icon name="people-outline"></ion-icon>
                        </span>
                        <span class="title">Manage Drivers</span>
                    </a>
                </li>

                <li>
                    <a href="./stationmanager.html">
                        <span class="icon">
                            <ion-icon name="people-outline"></ion-icon>
                        </span>
                        <span class="title">Manage Station Manager</span>
                    </a>
                </li>

                <li>
                    <a href="./manageroutes.html">
                        <span class="icon">
                            <i class="fas fa-route"></i>
                        </span>
                        <span class="title">Manage Routes</span>
                    </a>
                </li>

                <li>
                    <a href="./manageschedule.html">
                        <span class="icon">
                            <ion-icon name="settings-outline"></ion-icon>
                        </span>
                        <span class="title">Manage Schedule</span>
                    </a>
                </li>

                <!-- <li>
                    <a href="#">
                        <span class="icon">
                            <ion-icon name="lock-closed-outline"></ion-icon>
                        </span>
                        <span class="title">Report</span>
                    </a>
                </li> -->

                <li>
                    <a href = "#">
                        <span class="icon">
                            <ion-icon name="book-outline"></ion-icon>
                        </span>
                        <span class="title">Contents</span>
                    </a>
                </li>
                <li>
                    <a href="#" id="signout-link">
                        <span class="icon">
                            <ion-icon name="log-out-outline"></ion-icon>
                        </span>
                        <span class="title">Sign Out</span>
                    </a>
                </li>
            </ul>
        </div>

<!-- main -->

<div class="container2 main">
    <div class="topbar">
        <div class="toggle">
            <ion-icon name="menu-outline"></ion-icon>
        </div>
    </div>
    <div class="card">
        <div class="card-header">
            <h2>Manage Schedule</h2>
            <button class="add-btn" onclick="showAddScheduleForm()">Add Schedule</button>
        </div>
        <div class="add-schedule-form" style="display:none;">
            <form id="addScheduleForm" action="/addschedule" method="POST">
                <label for="route_id">Route id:</label>
                <input type="number" id="route_id" name="route_id" required>
                <label for="bus_id">Bus id:</label>
                <input type="number" id="bus_id" name="bus_id" required>
                <label for="departuretime">Departure time:</label>
                <input type="datetime-local" id="departuretime" name="departuretime" required>
                <label for="arrivaltime">Arrival time:</label>
                <input type="datetime-local" id="arrivaltime" name="arrivaltime" required>
                <label for="status">Status:</label>
                <select id="status" name="status">
                    <option value="active">Active</option>
                    <option value="inactive">Inactive</option>
                </select>
                <button type="submit" class="Addbutton">Add</button>
            </form>
        </div>
                <table class="station-table">
                    <thead>
                        <tr>
                            <th>Schedule Id</th>
                            <th>Route Id</th>
                            <th>Bus Id</th>
                            <th>Departure time</th>
                            <th>Arrival time</th>
                            <th>Status</th>
                        
                        </tr>
                    </thead>
                    <tbody>
                       
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <script>
        function showAddScheduleForm() {
            var form = document.querySelector('.add-schedule-form');
            form.style.display = form.style.display === 'none' ? 'block' : 'none';
        }
        document.addEventListener('DOMContentLoaded', function() {
    fetchSchedules(); // Call on page load to fetch and display schedules
});

function fetchSchedules() {
    fetch('/getschedules')
        .then(response => response.json())
        .then(schedules => {
            const scheduleList = document.getElementById('scheduleList'); // Make sure you have a tbody element with this ID in your table
            scheduleList.innerHTML = ''; // Clear previous entries

            schedules.forEach(schedule => {
                scheduleList.innerHTML += `
                    <tr>
                        <td>${schedule.schedule_id}</td>
                        <td>${schedule.route_id}</td>
                        <td>${schedule.bus_id}</td>
                        <td>${schedule.departure_time}</td>
                        <td>${schedule.arrival_time}</td>
                        <td>${schedule.status}</td>
                    </tr>
                `;
            });
        })
        .catch(error => {
            console.error('Error fetching schedules:', error);
        });
}
    </script>
     <!-- =========== Scripts =========  -->
     <!--script src="./main.js"></script-->

     <!-- signout popup information -->
     <!--script src="./signout.js"></script-->
      <!-- ====== ionicons ======= -->
      <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
      <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
</body>
</html>